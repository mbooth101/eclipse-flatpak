<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Eclipse Flathub Stats</title>
		<script>
function loadJSON(callback) {
	var xobj = new XMLHttpRequest();
	xobj.overrideMimeType("application/json");
	xobj.open('GET', 'charts/monthly_downloads.json', true);
	xobj.onreadystatechange = function () {
		if (xobj.readyState == 4 && xobj.status == "200") {
			callback(xobj.responseText);
		}
	};
	xobj.send();
}
loadJSON(function(response) {
	var data = JSON.parse(response);
	var div = document.getElementById("stats");
	for(var app in data) {
		var html = "<tr><th>" + app + "</th><th>Downloads †</th><th>Updates ‡</th></tr>";
		for(var month in data[app]) {
			html += "<tr><td>" + month + "</td><td>" + data[app][month][0] + "</td><td>" + data[app][month][1] + "</td></tr>";
		}
		var table = document.createElement("table");
		table.id = app;
		table.innerHTML = html;
		div.appendChild(table);
	}
});
		</script>
		<style>
table {
	border-collapse: collapse;
	margin: 1em;
}
table, th, td {
	border: 1px solid black;
}
th, td {
	padding: 0.25em;
}
		</style>
	</head>
	<body>
		<h2>Monthly Download Stats</h2>
		<div id="stats"></div>
		<p>† Total number of downloads (installs and updates) for the period</p>
		<p>‡ Number of those downloads that were updates</p>
		<h2>Daily Download Stats</h2>
		<img src="charts/downloads.png" />
	</body>
</html>
